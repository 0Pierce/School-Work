<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Home - Student Enrollment</title>
</head>
<body>
    <h1>Welcome to the Student Enrollment System</h1>

    <!-- Check if the user is logged in by looking for the session attribute -->
    <div th:if="${session.user != null}">
        <!-- Display profile link -->
        <p>Welcome, <span th:text="${session.user.firstname}">Student</span>!</p>
        <a th:href="@{/students/profile}">View Profile</a>

        <!-- Display enrolled program if available -->
        <div th:if="${not #lists.isEmpty(session.user.enrollments)}">
            <h3>Your Enrolled Program</h3>
            <!-- Loop through enrollments if there are multiple -->
            <div th:each="enrollment : ${session.user.enrollments}">
                <p>Program Name: <span th:text="${enrollment.program.programName}">Program</span></p>
                <p>Start Date: <span th:text="${enrollment.startDate}">Date</span></p>
                <p>Status: <span th:text="${enrollment.status}">Status</span></p>
            </div>
        </div>
        <div th:if="${#lists.isEmpty(session.user.enrollments)}">
            <p>You are not enrolled in any program.</p>
            <a th:href="@{/programs/select}">Enroll in a Program</a>
        </div>
    </div>

    <!-- If not logged in, display login and register links -->
    <div th:if="${session.user == null}">
        <a th:href="@{/students/register}">Register</a> | 
        <a th:href="@{/students/login}">Login</a>
    </div>
</body>
</html>
